# 시연 완료 (Demo Complete) 기획서

시연 완료 양식은 현장에서 진행된 시연의 결과와 고객의 반응, 그리고 구체적인 제안 사항을 기록하는 **'영업 성패의 핵심 기록'**입니다. 시각적 증빙(사진)과 파격적인 혜택 제안(할인)을 단일 화면에서 관리하도록 설계되었습니다.

---

## 1. 시각 표준 및 UI/UX (Visual & UX Engineering)

### 1.1 모달 디자인 및 UI 물리학 (Physics & Modals)
*   **사일런트 포커스 가드 (Focus Guard)**: 모달 진입 시 브라우저가 첫 번째 입력 필드에 강제 포커스를 두어 키보드를 팝업시키는 현상을 방지하기 위해, 투명한 더미 요소에 초기 포커스를 가두는 시스템 적용.
*   **마이크로 리프팅 (Tactile Feedback)**: 버튼 및 호버 배지 클릭 시 `cubic-bezier` 곡선을 따라 **`translateY(-1px)`** 부상하며, 클릭 시 **`scale(0.97)`**로 축소되는 물리 효과 적용.
*   **고퀄리티 스크롤바**: 내부 영역에 **4px 두께**의 반투명 커스텀 스크롤바(`rgba(0,0,0,0.08)`) 적용.

### 1.2 입력기 및 데이터 정규화 (Data Dynamics)
*   **TeasyDateTimeInput 슬롯 매니지먼트**:
    *   **Shift-Zero (Cursor Jump)**: 월/일 입력 시 단일 숫자 입력 단계에서 자동 패딩 및 다음 슬롯 즉시 점프.
    *   **Forward Delete 엔진**: 구분 기호(`-`, `:`)를 건너뛰며 다음 숫자 슬롯을 소멸시키는 슬롯 기반 삭제 로직.
*   **정밀 현금 포맷팅**: 금액 입력 즉시 천 단위 콤마와 마이너스(`-`) 기호 부여.
*   **CRM 브랜드 케이스**: 텍스트 내 'crm' 발견 시 렌더링 시점에 **대문자 'CRM'**으로 자동 교정.

---

## 2. 기능 및 비즈니스 로직 (Functionality & Logic)

### 2.1 자원 관리 및 무결성 (High Integrity)
*   **사진 정밀 중복 방지**: `file.name + file.size`의 바이트 단위 체크 및 Firebase 임시 토큰을 제거한 **순수 Base URL 비교**를 통한 이중 등록 원천 차단.
*   **수정 기한의 기준점**: 3영업일 카운트다운은 유저가 선택한 일시가 아닌, **문서가 실제로 DB에 생성된 시점(`createdAt`)**을 기준으로 계산.
*   **안전한 다운로드 브릿지**: `fetch`의 `no-cache` 모드로 데이터를 확보한 후 `Blob` 객체를 통해 다운로드를 수행하여 데이터 구식화 방지.
*   **세션 스로틀링**: 다중 파일 다운로드 시 브라우저 보안 정책 우회를 위해 파일당 **200ms의 인위적 지연** 발생.

### 2.2 시스템 연동 및 데이터 계승 (Integration)
*   **순번 및 세션 계승**: 신규 작성 시 가장 최근의 **'시연 확정' 문서에서 순번(`sequenceNumber`)을 상속받아** 확정-완료를 하나의 영업 세션으로 결합. 계승 실패 시 독립 차수 자동 발행.
*   **고객 기여 (Customer Sync)**: 저장 성공 시 고객 정보의 `lastConsultDate`를 즉시 갱신하는 원자적 트랜잭션 수행.

---

## 3. 타임라인 표현 표준 (Timeline Identity)

*   **조판 리듬 (Visual Rhythm)**: 콜론 전후에는 반드시 **비보관 공백(`\u00A0`)**을 배치하여 줄바꿈 시 콜론이 고립되는 현상 방지. (`\u00A0:\u00A0\u00A0`)
*   **날짜 표기**: 연-월-일과 시간 사이에 **2칸 공백** 사용. (`YYYY-MM-DD  HH:mm`)
*   **담당자 메타**: 퇴사자(`banned`) 회색 처리 및 `(퇴)` 접미사 적용. 협력사의 경우 노란색 전용 배지 중첩 노출.
*   **보안 제어**: `lpignore` 적용으로 외부 자동완성 툴의 입력창 오염 방지.

---

## 4. 버전 기록 (Version History)

| 버전 | 날짜 | 변경 사항 |
|:---|:---|:---|
| v2.0 | 2026-02-04 | 126건 최종 팩트 체크 반영. 순번 계승 로직, 사진 정밀 중복 방지, 스토리지 샤딩 및 메모리 클린업 통합 |
| v3.0 | 2026-02-04 | 10차 정밀 감사 반영. 포커스 가드, \u00A0 콜론 조판, CRM 대문자 강제 교정 및 물리 효과 사양 통합 |

---
> [!NOTE]
> 본 문서는 '시연 완료' 모듈의 구현 기준점입니다. 사진 업로드의 안정성과 영업 세션 연동의 데이터 일관성을 위해 본 지침을 최우선으로 준수합니다.
