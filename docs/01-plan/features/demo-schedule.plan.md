# 시연 확정 (Demo Schedule) 기획서

시연 확정 양식은 고객과의 시연 약속을 기록하고 관리하는 **'대면 영업의 첫 단추'**입니다. 방문 장소와 시간, 담당자를 명확히 정의하여 시연 완료 단계로 매끄럽게 이어지도록 설계되었습니다.

---

## 1. 시각 표준 및 UI/UX (Visual & UX)

시스템 전반의 **'Teasy Premium Vibe'**와 전역 시각 표준을 엄격히 준수합니다.

### 1.1 모달 디자인 상세 (Modal Design Specs)
*   **전용 컴포넌트**: `StandardReportForm`이 아닌 독자적인 `DemoScheduleForm` 구성을 사용합니다.
*   **그리드 레이아웃**:
    *   **상단 그룹 (HStack)**: `[시연 일시 - 담당자]` 순으로 배치.
    *   **중단 (Block)**: `[방문 주소]` 단독 행 배치 (`TeasyInput`).
    *   **하단 그룹 (HStack)**: `[연락처 - 시연 상품]` 순으로 배치.
*   **컴포넌트 규격**: 모든 입력 필드는 `h="45px"`, `borderRadius="10px"`를 준수함.
*   **플레이스홀더 및 규격 (Verbatim)**:
    *   **연락처**: `placeholder="000-0000-0000"` (입력 시 `TeasyPhoneInput` 활용)
    *   **기타 항목**: 선택 항목은 `placeholder="선택"`, 입력 항목은 `placeholder="입력"`.
    *   **글로벌 상속 (Global Inherited)**: `theme.ts`의 `letterSpacing: "0.5px"`를 상속받아 고급스러운 자간 유지.
*   **상태 피드백**:
    *   **로딩 (Loading)**: 저장 시 `Spinner`가 적용된 `z-index: 20`의 화이트 오버레이 노출.
    *   **읽기 전용 (Read-Only)**: `isReadOnly` 속성 활성화 시 모든 입력 필드는 비활성화 처리되며, '담당자' 및 '시연 상품' 등 선택 항목은 `CustomSelect` 대신 `TeasyInput`을 사용하여 라벨 값을 명확히 노출함.

### 1.2 타임라인 카드 UI (Timeline Representation)
*   **헤더**: '시연 확정' 배지(**Color: `blue`**), 방문 예정 일시, 작성자 성명 노출.
*   **정보 리스트**:
    *   **공통 (Common)**:
        *   **일시**: `일시 :  {date}  {time}`
        *   **담당**: `담당 :  {managerName}`
    *   **주소**: `주소 :  {location}` (TimelineCard.tsx 기준 라벨: "주소")
    *   **전화**: `전화 :  000-0000-0000` (포맷팅 적용)
    *   **상품**: `상품 :  {product}` (입력값이 `crm`일 경우 대문자 `CRM`으로 자동 치환 노출)
*   **지능형 담당자 배지**:
    *   **협력사**: 담당자가 `partner` 직군일 경우 성명 우측에 `yellow.400` '협력사' 배지 노출.
    *   **퇴사자**: 담당자가 `banned` 상태일 경우 성명을 `gray.400`으로 처리하고 접미사 `(퇴)` 표기.
*   **참고 사항**: 그레이 박스(`gray.50`) 영역에 줄바꿈을 포함한 메모 내용 노출.

---

## 2. 기능 및 비즈니스 로직 (Functionality & Logic)

### 2.1 지능형 정보 계승 및 바인딩 (Inheritance)
*   **담당자 옵션 로직**:
    *   `useReportMetadata` 훅을 통해 내부 직원과 협력사(Partner) 사이에 구분선(`divider`)을 자동 삽입하고, 퇴사자는 라벨에 `(퇴)`를 명시.
*   **Pre-fill (자동 완성)**: 
    *   신규 작성 시 고객 마스터 데이터(`address`, `phone`)를 각각 `location`, `phone` 필드로 자동 바인딩함.
    *   시연 일시는 현재 시간(YYYY-MM-DD  HH:mm)으로 기본값 설정.
*   **데이터 계승 소스**: 본 모듈에서 확정된 정보는 '시연 완료' 및 '시공 확정' 보고서 생성 시 핵심 상속 데이터로 작동함.

### 2.2 검증 및 원자성 (Validation & Integrity)
*   **제약 사항**:
    *   시연 일시는 **과거 시점 선택 불가** (코드상 `limitType="past"`는 과거 선택을 제한한다는 의미).
    *   **필수 항목 검증 메시지 (Toast)**:
        *   일시 미입력: `"시연 일시를 입력해주세요."`
        *   담당자 미선택: `"담당자를 선택해주세요."`
        *   주소 미입력: `"방문 주소를 입력해주세요."`
        *   연락처 미입력: `"연락처를 입력해주세요."`
        *   상품 미선택: `"시연 상품을 선택해주세요."`
*   **고객 마스터 동기화**: 저장 시 고객 정보의 `lastConsultDate`가 시연 예정 시간으로 업데이트됨.
*   **원자적 트랜잭션**: `customer_meta` (Prefix: `{customerId}_demo_schedule`)를 통한 순번 발급 및 시리얼라이제이션 보정.

---

## 3. 시각 브랜드 세부 표준 (Visual Brand Standards)
*   **콜론 규격 (Verbatim Spacing)**: 모든 라벨의 콜론은 반드시 **'전 1칸, 후 2칸'** 공백 규격(` :  `)을 준수함.
*   **ThinParen 적용**: 괄호(`()`), 하이픈(`-`) 등 특수 문자는 `ThinParen` 적용.
*   **날짜 표기**: 연-월-일과 시:분 사이에 **2칸 공백** 사용. (`YYYY-MM-DD  HH:mm`)

---

## 4. 버전 기록 (Version History)

| 버전 | 날짜 | 변경 사항 |
|:---|:---|:---|
| v1.0 | 2026-02-03 | 시연 확정 기획서 초안 작성 |
| v1.1 | 2026-02-03 | TimelineCard 전용 라벨("주소") 및 담당자 퇴사자(banned) UI 반영 |
| v1.2 | 2026-02-03 | 고객 정보 자동 바인딩(Pre-fill) 지침 정교화 |
| v1.3 | 2026-02-03 | 읽기 전용 모드 담당자/상품 TeasyInput 전환 표준 반영 |

---
> [!NOTE]
> 본 문서는 '시연 확정' 모듈의 구현 기준점입니다. 타임라인 표시 로직 및 하위 모듈 데이터 공급 설계 시 본 문서를 최우선으로 준수합니다.
